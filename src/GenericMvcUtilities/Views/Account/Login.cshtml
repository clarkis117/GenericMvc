@using System.Collections.Generic
@using Microsoft.AspNetCore.Http
@using Microsoft.AspNetCore.Http.Authentication
@model GenericMvcUtilities.ViewModels.UserManager.Account.PriviledgedLoginViewModel

@{
	Layout = "~/Views/Shared/_LoginLayout.cshtml";
	ViewData["Title"] = "Log in";
}

<section class="well">
	<header class="row">
		<div class="col-md-6">
			<div class="pull-left">
				<h2 class="text-primary">Content Management System</h2>
				<h4 class="text-primary">Please Login Using Your Registered Account</h4>
			</div>
		</div>
		<div class="col-md-6">
			<div class="pull-right">
				<h2 class="text-primary">@ViewData["Title"] - Using a local account</h2>
				<h4 class="text-primary"></h4>
			</div>
		</div>
	</header>
	<hr class="shadow-z-1 primarycolor" />
	<form asp-controller="Account" asp-action="Login" asp-route-returnurl="@ViewData["ReturnUrl"]" method="post" class="form-horizontal" role="form">
		<div asp-validation-summary="All" class="text-danger"></div>
		<div class="form-group">
			<label asp-for="Email" class="col-md-2 control-label"></label>
			<div class="col-md-10">
				<input asp-for="Email" class="form-control" />
				<span asp-validation-for="Email" class="text-danger"></span>
			</div>
		</div>
		<div class="form-group">
			<label asp-for="Password" class="col-md-2 control-label"></label>
			<div class="col-md-10">
				<input asp-for="Password" class="form-control" />
				<span asp-validation-for="Password" class="text-danger"></span>
			</div>
		</div>
		<div class="form-group">
			<div class="col-md-offset-2 col-md-10">
				<div class="checkbox">
					<label asp-for="RememberMe">
						<input asp-for="RememberMe" /> Remember Me?
					</label>
				</div>
			</div>
		</div>
		<div class="form-group">
			<div class="col-md-offset-2 col-md-10">
				<button type="submit" class="btn btn-primary btn-raised">Log in</button>
			</div>
		</div>
	</form>
	<hr class="shadow-z-1 primarycolor" />
	<footer class="row">
		<div class="col-md-6">
			<div class="pull-left">
				<p><a asp-action="Register">Register as a new user?</a></p>
				<p><a asp-action="ForgotPassword">Forgot your password?</a></p>
			</div>
		</div>
		<div class="col-md-6">
			<div class="pull-right">

			</div>
		</div>
	</footer>

	@* todo make separate page for this, project specific, @inject SignInManager<TUser>
		<div class="col-md-offset-1 col-md-4 well">
			<section>
				<h3>Use another service to log in.</h3>
				<hr />
				@{
				var loginProviders = SignInManager.GetExternalAuthenticationSchemes().ToList();
				if (loginProviders.Count == 0)
				{
						<div>
							<p>
								There are no external authentication services configured. See <a href="http://go.microsoft.com/fwlink/?LinkID=532715">this article</a>
								for details on setting up this ASP.NET application to support logging in via external services.
							</p>
						</div>
				}
				else
				{
						<form asp-controller="Account" asp-action="ExternalLogin" asp-route-returnurl="@ViewData["ReturnUrl"]" method="post" class="form-horizontal" role="form">
							<div>
								<p>
									@foreach (var provider in loginProviders)
									{
										<button type="submit" class="btn btn-default" name="provider" value="@provider.AuthenticationScheme" title="Log in using your @provider.DisplayName account">@provider.AuthenticationScheme</button>
									}
								</p>
							</div>
						</form>
				}
				}
			</section>
		</div>
	*@
</section>

@section Scripts {
	@{ await Html.PartialAsync("_ValidationScriptsPartial"); }
}